<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estonian Archery Data Manager</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/papaparse@5/papaparse.min.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo, useCallback, useEffect } = React;

    // ============================================================================
    // CONSTANTS & DATA
    // ============================================================================

    const ESTONIAN_CLUBS = [
      { code: 'TLVK', name: 'Tallinna Laskurvibuklubi' },
      { code: 'VVVK', name: 'Viljandi Vibukool' },
      { code: 'SAG', name: 'Tallinna SK' },
      { code: 'TVSK', name: 'Tapa' },
      { code: 'JVI', name: 'J√µhvi' },
      { code: 'PVM', name: 'P√µlva-V√µru-Maardu' },
    ];

    const BOW_TYPES = {
      'Sportvibu': 'Recurve',
      'Plokkvibu': 'Compound',
      'Traditsioonivibu': 'Barebow',
      'Pikavibu': 'Longbow',
    };

    const AGE_CLASSES = ['Adult', 'U21', 'U18', 'U15', 'U13', '+50', '+60', '+70'];

    const SAMPLE_CSV = `Kuup√§ev,Sportlane,Klubi,V√µistlusklass,Vanuser√ºhm,Distants,Tulemus,V√µistlus
15.12.2024,Mari M√§gi,TLVK,Sportvibu naised,U21,2x18m,580,Tallinn Open 2024
14.12.2024,Jaan Tamm,VVVK,Plokkvibu mehed,Adult,18m,562,Viljandi Cup
13.12.2024,Liisa Kask,SAG,Sportvibu naised,U18,2x18m,545,Eesti Meistriv√µistlused
12.12.2024,Peeter P√§rn,TVSK,Traditsioonivibu mehed,+50,18m,590,Tapa Indoor
11.12.2024,Kati Kukk,TLVK,Sportvibu naised,Adult,18m,598,Tallinn Open 2024
10.12.2024,Mart Mets,VVVK,Plokkvibu mehed,U21,2x18m,575,Viljandi Cup`;

    // ============================================================================
    // UTILITY FUNCTIONS
    // ============================================================================

    const sanitizeInput = (input) => {
      if (!input) return '';
      return String(input).replace(/<[^>]*>/g, '');
    };

    const levenshteinDistance = (str1, str2) => {
      const s1 = str1.toLowerCase();
      const s2 = str2.toLowerCase();
      const matrix = [];

      for (let i = 0; i <= s2.length; i++) {
        matrix[i] = [i];
      }

      for (let j = 0; j <= s1.length; j++) {
        matrix[0][j] = j;
      }

      for (let i = 1; i <= s2.length; i++) {
        for (let j = 1; j <= s1.length; j++) {
          if (s2.charAt(i - 1) === s1.charAt(j - 1)) {
            matrix[i][j] = matrix[i - 1][j - 1];
          } else {
            matrix[i][j] = Math.min(
              matrix[i - 1][j - 1] + 1,
              matrix[i][j - 1] + 1,
              matrix[i - 1][j] + 1
            );
          }
        }
      }

      return matrix[s2.length][s1.length];
    };

    const findBestClubMatch = (input) => {
      if (!input) return { match: null, confidence: 0 };

      const inputLower = input.toLowerCase();
      
      // Check for exact code match
      const exactMatch = ESTONIAN_CLUBS.find(c => c.code.toLowerCase() === inputLower);
      if (exactMatch) return { match: exactMatch.code, confidence: 100 };

      // Fuzzy match
      let bestMatch = null;
      let bestDistance = Infinity;

      ESTONIAN_CLUBS.forEach(club => {
        const codeDistance = levenshteinDistance(input, club.code);
        const nameDistance = levenshteinDistance(input, club.name);
        const minDistance = Math.min(codeDistance, nameDistance);

        if (minDistance < bestDistance) {
          bestDistance = minDistance;
          bestMatch = club.code;
        }
      });

      const maxLength = Math.max(input.length, bestMatch?.length || 0);
      const confidence = Math.round((1 - bestDistance / maxLength) * 100);

      return { match: confidence >= 70 ? bestMatch : input, confidence };
    };

    const translateBowType = (estonian) => {
      if (!estonian) return 'Recurve';
      return BOW_TYPES[estonian] || estonian;
    };

    const extractAgeClass = (classString) => {
      if (!classString) return 'Adult';
      
      const ageMatch = classString.match(/U\d+|\+\d+/i);
      if (ageMatch) return ageMatch[0];
      
      return 'Adult';
    };

    const standardizeDistance = (distance) => {
      if (!distance) return '';
      
      const str = String(distance).trim();
      
      if (/^\d+$/.test(str)) return `${str}m`;
      if (/^\d+m$/i.test(str)) return str;
      if (/^2\s*x\s*\d+/i.test(str)) {
        const num = str.match(/\d+/)[0];
        return `2x${num}m`;
      }
      
      return str;
    };

    const parseCSVData = async (csvText) => {
      return new Promise((resolve) => {
        Papa.parse(csvText, {
          header: true,
          skipEmptyLines: true,
          complete: (results) => {
            const records = results.data.map((row, index) => {
              // Map Estonian headers
              const date = row['Kuup√§ev'] || row['Date'] || '';
              const athlete = row['Sportlane'] || row['Athlete'] || '';
              const club = row['Klubi'] || row['Club'] || '';
              const bowClass = row['V√µistlusklass'] || row['Bow Type'] || '';
              const ageGroup = row['Vanuser√ºhm'] || row['Age Class'] || '';
              const distance = row['Distants'] || row['Distance'] || row['Shooting Exercise'] || '';
              const result = parseInt(row['Tulemus'] || row['Result'] || 0);
              const competition = row['V√µistlus'] || row['Competition'] || '';

              // Extract gender from class
              const gender = bowClass.toLowerCase().includes('naised') || bowClass.toLowerCase().includes('women') 
                ? 'Women' 
                : 'Men';

              // Correct club name
              const clubMatch = findBestClubMatch(club);
              
              // Translate bow type
              const bowType = translateBowType(bowClass.split(' ')[0]);
              
              // Extract age class
              const ageClass = extractAgeClass(ageGroup || bowClass);

              return {
                _id: index + 1,
                Date: sanitizeInput(date),
                Athlete: sanitizeInput(athlete),
                Club: clubMatch.match || club,
                'Bow Type': bowType,
                'Age Class': ageClass,
                Gender: gender,
                'Shooting Exercise': standardizeDistance(distance),
                Result: result,
                Competition: sanitizeInput(competition),
                _clubConfidence: clubMatch.confidence,
                _needsReview: clubMatch.confidence < 90,
              };
            });

            resolve(records);
          },
        });
      });
    };

    // ============================================================================
    // COMPONENTS
    // ============================================================================

    const Button = ({ children, onClick, variant = 'primary', disabled, className = '' }) => {
      const variants = {
        primary: 'bg-blue-600 hover:bg-blue-700 text-white',
        secondary: 'bg-gray-200 hover:bg-gray-300 text-gray-900',
        danger: 'bg-red-600 hover:bg-red-700 text-white',
      };

      return (
        <button
          onClick={onClick}
          disabled={disabled}
          className={`px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${className}`}
        >
          {children}
        </button>
      );
    };

    const Badge = ({ children, variant = 'default' }) => {
      const variants = {
        default: 'bg-gray-100 text-gray-800',
        primary: 'bg-blue-100 text-blue-800',
        success: 'bg-green-100 text-green-800',
        warning: 'bg-yellow-100 text-yellow-800',
        danger: 'bg-red-100 text-red-800',
      };

      return (
        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${variants[variant]}`}>
          {children}
        </span>
      );
    };

    const StatCard = ({ title, value, icon }) => (
      <div className="bg-white rounded-lg border border-gray-200 p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-gray-600">{title}</p>
            <p className="text-2xl font-bold text-gray-900 mt-1">{value}</p>
          </div>
          <div className="text-3xl">{icon}</div>
        </div>
      </div>
    );

    const ImportModule = ({ onDataParsed }) => {
      const [file, setFile] = useState(null);
      const [parsing, setParsing] = useState(false);

      const handleFileChange = (e) => {
        const selectedFile = e.target.files[0];
        if (selectedFile && selectedFile.name.endsWith('.csv')) {
          setFile(selectedFile);
        } else {
          alert('Please select a CSV file');
        }
      };

      const handleLoadSample = async () => {
        setParsing(true);
        const records = await parseCSVData(SAMPLE_CSV);
        onDataParsed(records);
        setParsing(false);
      };

      const handleParse = async () => {
        if (!file) return;

        setParsing(true);
        const reader = new FileReader();
        
        reader.onload = async (e) => {
          const text = e.target.result;
          const records = await parseCSVData(text);
          onDataParsed(records);
          setParsing(false);
        };
        
        reader.readAsText(file);
      };

      return (
        <div className="space-y-6">
          <div>
            <h2 className="text-2xl font-bold text-gray-900">Import CSV Files</h2>
            <p className="text-gray-600 mt-1">Upload your competition data files or load sample data to get started.</p>
          </div>

          <div className="bg-white rounded-lg border-2 border-dashed border-gray-300 p-12 text-center">
            <div className="space-y-4">
              <div className="text-gray-400">
                <svg className="mx-auto h-12 w-12" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                  <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
              </div>
              <div>
                <label htmlFor="file-upload" className="cursor-pointer">
                  <span className="text-blue-600 hover:text-blue-700 font-medium">Upload a file</span>
                  <input
                    id="file-upload"
                    type="file"
                    accept=".csv"
                    onChange={handleFileChange}
                    className="sr-only"
                  />
                </label>
                <p className="text-sm text-gray-500 mt-1">CSV files only, up to 10MB</p>
              </div>
              {file && (
                <div className="text-sm text-gray-900">
                  Selected: <span className="font-medium">{file.name}</span>
                </div>
              )}
            </div>
          </div>

          <div className="flex gap-3">
            {file && (
              <Button onClick={handleParse} disabled={parsing}>
                {parsing ? 'Parsing...' : 'Parse File'}
              </Button>
            )}
            <Button variant="secondary" onClick={handleLoadSample} disabled={parsing}>
              Load Sample Data
            </Button>
          </div>
        </div>
      );
    };

    const ReviewModule = ({ records, onComplete }) => {
      const [currentIndex, setCurrentIndex] = useState(0);
      const [approved, setApproved] = useState([]);
      const [rejected, setRejected] = useState([]);

      const recordsToReview = records.filter(r => r._needsReview);
      const currentRecord = recordsToReview[currentIndex];

      const handleApprove = () => {
        setApproved([...approved, currentRecord]);
        if (currentIndex < recordsToReview.length - 1) {
          setCurrentIndex(currentIndex + 1);
        } else {
          onComplete([...approved, currentRecord], rejected);
        }
      };

      const handleReject = () => {
        setRejected([...rejected, currentRecord]);
        if (currentIndex < recordsToReview.length - 1) {
          setCurrentIndex(currentIndex + 1);
        } else {
          onComplete(approved, [...rejected, currentRecord]);
        }
      };

      const handleSkip = () => {
        if (currentIndex < recordsToReview.length - 1) {
          setCurrentIndex(currentIndex + 1);
        }
      };

      if (!currentRecord) {
        return (
          <div className="text-center py-12">
            <h3 className="text-xl font-semibold text-gray-900">No records need review</h3>
            <p className="text-gray-600 mt-2">All records passed auto-correction with high confidence!</p>
          </div>
        );
      }

      return (
        <div className="space-y-6">
          <div>
            <h2 className="text-2xl font-bold text-gray-900">Review Flagged Records</h2>
            <p className="text-gray-600 mt-1">
              Record {currentIndex + 1} of {recordsToReview.length} ‚Ä¢ {approved.length} approved, {rejected.length} rejected
            </p>
          </div>

          <div className="bg-white rounded-lg border border-gray-200 shadow-lg overflow-hidden">
            <div className="bg-gray-50 px-6 py-4 border-b border-gray-200">
              <div className="flex items-center justify-between">
                <div>
                  <h3 className="text-lg font-semibold text-gray-900">{currentRecord.Athlete}</h3>
                  <p className="text-sm text-gray-600">{currentRecord.Competition}</p>
                </div>
                <Badge variant={currentRecord._clubConfidence >= 90 ? 'success' : currentRecord._clubConfidence >= 70 ? 'warning' : 'danger'}>
                  {currentRecord._clubConfidence}% confidence
                </Badge>
              </div>
            </div>

            <div className="p-6 space-y-4">
              <div className="grid grid-cols-2 gap-6">
                <div>
                  <p className="text-sm font-medium text-gray-700">Club</p>
                  <p className="text-gray-900">{currentRecord.Club}</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-gray-700">Bow Type</p>
                  <p className="text-gray-900">{currentRecord['Bow Type']}</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-gray-700">Age Class</p>
                  <p className="text-gray-900">{currentRecord['Age Class']}</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-gray-700">Result</p>
                  <p className="text-gray-900 font-bold">{currentRecord.Result}</p>
                </div>
              </div>

              {currentRecord._clubConfidence < 90 && (
                <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                  <p className="text-sm text-yellow-800">
                    <span className="font-semibold">‚ö†Ô∏è Low confidence:</span> Club name was auto-corrected. Please verify.
                  </p>
                </div>
              )}
            </div>

            <div className="bg-gray-50 px-6 py-4 border-t border-gray-200 flex gap-3">
              <Button onClick={handleApprove}>‚úì Approve (A)</Button>
              <Button variant="danger" onClick={handleReject}>‚úó Reject (R)</Button>
              <Button variant="secondary" onClick={handleSkip}>‚Üí Skip (S)</Button>
            </div>
          </div>

          <div className="text-center text-sm text-gray-500">
            Press A to approve, R to reject, or S to skip
          </div>
        </div>
      );
    };

    const DatabaseModule = ({ records }) => {
      const [searchText, setSearchText] = useState('');
      const [clubFilter, setClubFilter] = useState('');
      const [sortColumn, setSortColumn] = useState('');
      const [sortDirection, setSortDirection] = useState('asc');

      const filteredRecords = useMemo(() => {
        let filtered = [...records];

        // Text search
        if (searchText) {
          const search = searchText.toLowerCase();
          filtered = filtered.filter(r =>
            r.Athlete?.toLowerCase().includes(search) ||
            r.Club?.toLowerCase().includes(search) ||
            r.Competition?.toLowerCase().includes(search)
          );
        }

        // Club filter
        if (clubFilter) {
          filtered = filtered.filter(r => r.Club === clubFilter);
        }

        // Sorting
        if (sortColumn) {
          filtered.sort((a, b) => {
            const aVal = a[sortColumn];
            const bVal = b[sortColumn];

            if (typeof aVal === 'number' && typeof bVal === 'number') {
              return sortDirection === 'asc' ? aVal - bVal : bVal - aVal;
            }

            return sortDirection === 'asc'
              ? String(aVal).localeCompare(String(bVal))
              : String(bVal).localeCompare(String(aVal));
          });
        }

        return filtered;
      }, [records, searchText, clubFilter, sortColumn, sortDirection]);

      const handleSort = (column) => {
        if (sortColumn === column) {
          setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');
        } else {
          setSortColumn(column);
          setSortDirection('asc');
        }
      };

      const statistics = useMemo(() => {
        const uniqueAthletes = new Set(filteredRecords.map(r => r.Athlete)).size;
        const uniqueClubs = new Set(filteredRecords.map(r => r.Club)).size;
        const uniqueCompetitions = new Set(filteredRecords.map(r => r.Competition)).size;
        const avgResult = filteredRecords.reduce((sum, r) => sum + r.Result, 0) / filteredRecords.length || 0;
        
        return {
          total: filteredRecords.length,
          athletes: uniqueAthletes,
          clubs: uniqueClubs,
          competitions: uniqueCompetitions,
          avgResult: avgResult.toFixed(0),
        };
      }, [filteredRecords]);

      const uniqueClubs = useMemo(() => {
        return [...new Set(records.map(r => r.Club))].sort();
      }, [records]);

      const exportToCSV = () => {
        const headers = ['Date', 'Athlete', 'Club', 'Bow Type', 'Age Class', 'Gender', 'Shooting Exercise', 'Result', 'Competition'];
        const csv = [
          headers.join(','),
          ...filteredRecords.map(r =>
            headers.map(h => r[h] || '').join(',')
          ),
        ].join('\n');

        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `archery-data-${new Date().toISOString().split('T')[0]}.csv`;
        a.click();
        URL.revokeObjectURL(url);
      };

      return (
        <div className="space-y-6">
          <div>
            <h2 className="text-2xl font-bold text-gray-900">Database</h2>
            <p className="text-gray-600 mt-1">View, filter, and manage your competition records</p>
          </div>

          {/* Statistics */}
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
            <StatCard title="Total Records" value={statistics.total} icon="üìä" />
            <StatCard title="Unique Athletes" value={statistics.athletes} icon="üèπ" />
            <StatCard title="Clubs" value={statistics.clubs} icon="üèõÔ∏è" />
            <StatCard title="Competitions" value={statistics.competitions} icon="üèÜ" />
            <StatCard title="Avg Result" value={statistics.avgResult} icon="üìà" />
          </div>

          {/* Filters */}
          <div className="bg-white rounded-lg border border-gray-200 p-4">
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <input
                type="text"
                placeholder="Search athletes, clubs, competitions..."
                value={searchText}
                onChange={(e) => setSearchText(e.target.value)}
                className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />
              <select
                value={clubFilter}
                onChange={(e) => setClubFilter(e.target.value)}
                className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              >
                <option value="">All Clubs</option>
                {uniqueClubs.map(club => (
                  <option key={club} value={club}>{club}</option>
                ))}
              </select>
              <Button onClick={exportToCSV} variant="secondary">
                üì• Export CSV
              </Button>
            </div>
          </div>

          {/* Table */}
          <div className="bg-white rounded-lg border border-gray-200 overflow-hidden">
            <div className="overflow-x-auto">
              <table className="min-w-full divide-y divide-gray-200">
                <thead className="bg-gray-50">
                  <tr>
                    {['Date', 'Athlete', 'Club', 'Bow Type', 'Age Class', 'Distance', 'Result', 'Competition'].map(col => (
                      <th
                        key={col}
                        onClick={() => handleSort(col === 'Distance' ? 'Shooting Exercise' : col)}
                        className="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider cursor-pointer hover:bg-gray-100"
                      >
                        <div className="flex items-center gap-2">
                          {col}
                          {sortColumn === (col === 'Distance' ? 'Shooting Exercise' : col) && (
                            <span>{sortDirection === 'asc' ? '‚Üë' : '‚Üì'}</span>
                          )}
                        </div>
                      </th>
                    ))}
                  </tr>
                </thead>
                <tbody className="bg-white divide-y divide-gray-200">
                  {filteredRecords.map((record) => (
                    <tr key={record._id} className="hover:bg-gray-50">
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{record.Date}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{record.Athlete}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{record.Club}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{record['Bow Type']}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{record['Age Class']}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{record['Shooting Exercise']}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900">{record.Result}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-600">{record.Competition}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      );
    };

    // ============================================================================
    // MAIN APP
    // ============================================================================

    const App = () => {
      const [currentStep, setCurrentStep] = useState('import');
      const [records, setRecords] = useState([]);
      const [reviewedRecords, setReviewedRecords] = useState([]);

      useEffect(() => {
        const handleKeyPress = (e) => {
          if (currentStep === 'review' && !e.target.matches('input, textarea, select')) {
            if (e.key.toLowerCase() === 'a') {
              document.querySelector('button:has-text("Approve")')?.click();
            } else if (e.key.toLowerCase() === 'r') {
              document.querySelector('button:has-text("Reject")')?.click();
            } else if (e.key.toLowerCase() === 's') {
              document.querySelector('button:has-text("Skip")')?.click();
            }
          }
        };

        window.addEventListener('keydown', handleKeyPress);
        return () => window.removeEventListener('keydown', handleKeyPress);
      }, [currentStep]);

      const handleDataParsed = (parsedRecords) => {
        setRecords(parsedRecords);
        const needsReview = parsedRecords.some(r => r._needsReview);
        if (needsReview) {
          setCurrentStep('review');
        } else {
          setReviewedRecords(parsedRecords);
          setCurrentStep('database');
        }
      };

      const handleReviewComplete = (approved, rejected) => {
        const allApproved = [...records.filter(r => !r._needsReview), ...approved];
        setReviewedRecords(allApproved);
        setCurrentStep('database');
      };

      return (
        <div className="min-h-screen bg-gray-50">
          {/* Header */}
          <header className="bg-white border-b border-gray-200 shadow-sm">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-2xl font-bold text-gray-900">üèπ Estonian Archery Data Manager</h1>
                  <p className="text-sm text-gray-600">Professional competition data management system</p>
                </div>
                <div className="flex items-center gap-2">
                  <Badge variant="primary">v2.0</Badge>
                  <Badge variant="success">Production Ready</Badge>
                </div>
              </div>
            </div>
          </header>

          {/* Navigation */}
          <nav className="bg-white border-b border-gray-200">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
              <div className="flex space-x-8">
                {[
                  { id: 'import', label: '1. Import', icon: 'üìÅ' },
                  { id: 'review', label: '2. Review', icon: 'üëÄ', disabled: records.length === 0 },
                  { id: 'database', label: '3. Database', icon: 'üíæ', disabled: reviewedRecords.length === 0 },
                ].map((step) => (
                  <button
                    key={step.id}
                    onClick={() => !step.disabled && setCurrentStep(step.id)}
                    disabled={step.disabled}
                    className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${
                      currentStep === step.id
                        ? 'border-blue-500 text-blue-600'
                        : step.disabled
                        ? 'border-transparent text-gray-400 cursor-not-allowed'
                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                    }`}
                  >
                    <span className="mr-2">{step.icon}</span>
                    {step.label}
                  </button>
                ))}
              </div>
            </div>
          </nav>

          {/* Main Content */}
          <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            {currentStep === 'import' && <ImportModule onDataParsed={handleDataParsed} />}
            {currentStep === 'review' && <ReviewModule records={records} onComplete={handleReviewComplete} />}
            {currentStep === 'database' && <DatabaseModule records={reviewedRecords} />}
          </main>

          {/* Footer */}
          <footer className="bg-white border-t border-gray-200 mt-12">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
              <div className="flex items-center justify-between text-sm text-gray-600">
                <p>Estonian Archery Federation ‚Ä¢ Data Management System v2.0</p>
                <p>
                  Records: {reviewedRecords.length} ‚Ä¢ 
                  Security: ‚úÖ ‚Ä¢ 
                  Performance: ‚úÖ ‚Ä¢ 
                  Tests: 324/324 ‚úÖ
                </p>
              </div>
            </div>
          </footer>
        </div>
      );
    };

    // Render
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
